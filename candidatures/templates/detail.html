{% extends 'index.html' %}

{% block title %}GRH Smart · {{ candidature.nom }}{% endblock %}

{% block header_title %}GRH Smart · Détail candidature{% endblock %}

{% block content %}
<div class="container mx-auto max-w-2xl space-y-6">

    <!-- HEADER BREADCRUMB -->
    <nav class="flex items-center gap-2 text-sm text-slate-400 mb-6">
      <a href="{% url 'candidatures:list' %}" class="hover:text-slate-300 transition">Candidatures</a>
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
        <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
      </svg>
      <span class="text-slate-300">{{ candidature.nom }}</span>
    </nav>

    <!-- CARTE PRINCIPALE -->
    <section class="rounded-2xl border border-slate-800 bg-slate-900/60 p-6 shadow-lg">
      <div class="flex items-start justify-between mb-6">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-violet-400 to-violet-300 grid place-items-center shadow-lg">
            <svg class="w-8 h-8 text-slate-900" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-slate-100">{{ candidature.nom }}</h1>
            <p class="text-slate-400">{{ candidature.get_poste_display }}</p>
          </div>
        </div>
        
        <!-- Statut Badge -->
        <div class="text-right">
          {% if candidature.statut == 'soumise' %}
            <span class="inline-flex items-center rounded-full px-4 py-2 text-sm bg-sky-950 text-sky-300">Soumise</span>
          {% elif candidature.statut == 'en_revue' %}
            <span class="inline-flex items-center rounded-full px-4 py-2 text-sm bg-amber-950 text-amber-300">En revue</span>
          {% elif candidature.statut == 'preselection' %}
            <span class="inline-flex items-center rounded-full px-4 py-2 text-sm bg-emerald-950 text-emerald-300">Présélection</span>
          {% elif candidature.statut == 'rejetee' %}
            <span class="inline-flex items-center rounded-full px-4 py-2 text-sm bg-rose-950 text-rose-300">Rejetée</span>
          {% elif candidature.statut == 'embauchee' %}
            <span class="inline-flex items-center rounded-full px-4 py-2 text-sm bg-cyan-950 text-cyan-300">Embauché(e)</span>
          {% endif %}
        </div>
      </div>

      <!-- INFORMATIONS DÉTAILLÉES -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="rounded-xl border border-slate-800 bg-slate-900 p-4">
          <p class="text-xs text-slate-400 mb-1">Score d'évaluation</p>
          <p class="text-3xl font-bold {% if candidature.score >= 80 %}text-emerald-400{% elif candidature.score >= 60 %}text-amber-400{% else %}text-rose-400{% endif %}">
            {{ candidature.score }}
            <span class="text-base text-slate-400 font-normal">/100</span>
          </p>
        </div>
        
        <div class="rounded-xl border border-slate-800 bg-slate-900 p-4">
          <p class="text-xs text-slate-400 mb-1">Date de candidature</p>
          <p class="text-lg font-semibold text-slate-200">{{ candidature.date_creation|date:"d M Y" }}</p>
          <p class="text-xs text-slate-400">{{ candidature.date_creation|date:"H:i" }}</p>
        </div>
        
        <div class="rounded-xl border border-slate-800 bg-slate-900 p-4">
          <p class="text-xs text-slate-400 mb-1">Dernière modification</p>
          <p class="text-lg font-semibold text-slate-200">{{ candidature.date_modification|date:"d M Y" }}</p>
          <p class="text-xs text-slate-400">{{ candidature.date_modification|date:"H:i" }}</p>
        </div>
      </div>

      <!-- ACTIONS -->
      <div class="flex flex-col sm:flex-row items-center gap-3 pt-6 border-t border-slate-800">
        <a href="{% url 'candidatures:list' %}" class="flex-1 sm:flex-none px-6 py-3 rounded-xl border border-slate-700 bg-slate-800 hover:bg-slate-700 transition text-center">
          ← Retour à la liste
        </a>
        
        <div class="flex gap-3 flex-1 sm:flex-none">
          <a href="{% url 'candidatures:edit' candidature.pk %}" class="px-6 py-3 rounded-xl bg-violet-600 hover:bg-violet-700 transition text-white">
            Éditer
          </a>
          <a href="{% url 'candidatures:delete' candidature.pk %}" class="px-6 py-3 rounded-xl bg-rose-600 hover:bg-rose-700 transition text-white">
            Supprimer
          </a>
        </div>
      </div>
    </section>

</div>
{% endblock %}
